RewriteEngine on

# ROUTES

# AFFICHAGE D'UN POST
# URL: posts/id/slug.html
# PATTERN: ?posts=show&id=x
# FROM: ?posts=show&id=x TO:posts/id/slug.html
RewriteRule ^posts/([1-9][0-9]*)/[a-z0-9][a-z0-9\-]*\.html$ index.php?posts=show&id=$1 [L]


# AFFICHAGE DU FORMULAIRE D'AJOUT D'UN POST
# URL: posts/add/form.html
# PATTERN: ?posts=form
# FROM: ?posts=form TO:posts/add/form.html
RewriteRule ^posts/add/form\.html$ index.php?posts=form [L]

# AJOUT D'UN POST : INSERT
# URL: posts/add/insert.html
# PATTERN: ?posts=insert
RewriteRule ^posts/add/insert\.html$ index.php?posts=insert [L]

# posts.edit-form (modification)
# URL: posts/id/slug/edit/form.html
# PATTERN: ?posts=editForm&id=x
RewriteRule ^posts/([1-9][0-9]*)/[a-z0-9][a-z0-9\-]*/edit/form\.html$ index.php?posts=editForm&id=$1 [L]

# posts.update (modification)
# URL: posts/id/slug/edit/update.html
# PATTERN: ?posts=update&id=x
RewriteRule ^posts/([1-9][0-9]*)/[a-z0-9][a-z0-9\-]*/edit/update\.html$ index.php?posts=update&id=$1 [L]

# posts.delete (suppression)
# URL: posts/id/slug/delete.html
# PATTERN: ?posts=delete&id=x
RewriteRule ^posts/([1-9][0-9]*)/[a-z0-9][a-z0-9\-]*/delete\.html$ index.php?posts=delete&id=$1 [L]

# --------------------------------------------------
# Catch-all: ignore fichiers statiques, tout le reste â†’ index.php
RewriteCond %{REQUEST_URI} !\.(js|css|jpg|gif|zip|png|pdf)$ [NC]
RewriteRule ^(.*)$ index.php [L]